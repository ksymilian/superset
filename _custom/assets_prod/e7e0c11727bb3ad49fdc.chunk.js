(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8693],{82134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(67294),s=n(45697),a=n.n(s),i=n(37672),o=n(42441),l=n.n(o),c=n(61988),p=n(19322),u=n.n(p);function d(e){return r.createElement("span",{className:"BootstrapSliderWrapper"},r.createElement(u(),e))}const h={start:a().number.isRequired,step:a().number.isRequired,end:a().number.isRequired,values:a().array.isRequired,onChange:a().func,loopDuration:a().number,maxFrames:a().number,orientation:a().oneOf(["horizontal","vertical"]),reversed:a().bool,disabled:a().bool,range:a().bool};class m extends r.PureComponent{constructor(e){super(e),this.state={intervalId:null};const t=e.end-e.start,n=Math.min(e.maxFrames,t/e.step),r=t/n;this.intervalMilliseconds=e.loopDuration/n,this.increment=r<e.step?e.step:r-r%e.step,this.onChange=this.onChange.bind(this),this.play=this.play.bind(this),this.pause=this.pause.bind(this),this.stepBackward=this.stepBackward.bind(this),this.stepForward=this.stepForward.bind(this),this.getPlayClass=this.getPlayClass.bind(this),this.formatter=this.formatter.bind(this)}componentDidMount(){l().bind(["space"],this.play)}componentWillUnmount(){l().unbind(["space"])}onChange(e){this.props.onChange(e.target.value),null!=this.state.intervalId&&this.pause()}getPlayClass(){return null==this.state.intervalId?"fa fa-play fa-lg slider-button":"fa fa-pause fa-lg slider-button"}play(){if(!this.props.disabled)if(null!=this.state.intervalId)this.pause();else{const e=setInterval(this.stepForward,this.intervalMilliseconds);this.setState({intervalId:e})}}pause(){clearInterval(this.state.intervalId),this.setState({intervalId:null})}stepForward(){const{start:e,end:t,step:n,values:r,disabled:s}=this.props;if(s)return;const a=(Array.isArray(r)?r:[r,r+n]).map((e=>e+this.increment)),i=a[1]>t?a[0]-e:0;this.props.onChange(a.map((e=>e-i)))}stepBackward(){const{start:e,end:t,step:n,values:r,disabled:s}=this.props;if(s)return;const a=(Array.isArray(r)?r:[r,r+n]).map((e=>e-this.increment)),i=a[0]<e?t-a[1]:0;this.props.onChange(a.map((e=>e+i)))}formatter(e){if(this.props.disabled)return(0,c.t)("Data has no time steps");let t=e;return Array.isArray(e)?e[0]===e[1]&&(t=[e[0]]):t=[e],t.map((e=>new Date(e).toUTCString())).join(" : ")}render(){const{start:e,end:t,step:n,orientation:s,reversed:a,disabled:i,range:o,values:l}=this.props;return r.createElement("div",{className:"play-slider"},r.createElement("div",{className:"play-slider-controls padded"},r.createElement("i",{className:"fa fa-step-backward fa-lg slider-button ",onClick:this.stepBackward}),r.createElement("i",{className:this.getPlayClass(),onClick:this.play}),r.createElement("i",{className:"fa fa-step-forward fa-lg slider-button ",onClick:this.stepForward})),r.createElement("div",{className:"play-slider-scrobbler padded"},r.createElement(d,{value:o?l:l[0],range:o,formatter:this.formatter,change:this.onChange,min:e,max:t,step:n,orientation:s,reversed:a,disabled:i?"disabled":"enabled"})))}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}m.propTypes=h,m.defaultProps={onChange:()=>{},loopDuration:15e3,maxFrames:100,orientation:"horizontal",reversed:!1,disabled:!1,range:!0};const g={getLayers:a().func.isRequired,start:a().number.isRequired,end:a().number.isRequired,getStep:a().func,values:a().array.isRequired,aggregation:a().bool,disabled:a().bool,viewport:a().object.isRequired,children:a().node,mapStyle:a().string,mapboxApiAccessToken:a().string.isRequired,setControlValue:a().func,onValuesChange:a().func,width:a().number.isRequired,height:a().number.isRequired};class b extends r.PureComponent{constructor(){super(...arguments),f(this,"containerRef",r.createRef()),f(this,"setTooltip",(e=>{const{current:t}=this.containerRef;t&&t.setTooltip(e)}))}render(){const{start:e,end:t,getStep:n,disabled:s,aggregation:a,children:o,getLayers:l,values:c,onValuesChange:p,viewport:u,setControlValue:d,mapStyle:h,mapboxApiAccessToken:f,height:g,width:b}=this.props,v=l(c);return r.createElement("div",null,r.createElement(i.Z,{ref:this.containerRef,viewport:u,layers:v,setControlValue:d,mapStyle:h,mapboxApiAccessToken:f,bottomMargin:s?0:20,width:b,height:g}),!s&&r.createElement(m,{start:e,end:t,step:n(e),values:c,range:!a,onChange:p}),o)}}b.propTypes=g,b.defaultProps={aggregation:!1,disabled:!1,mapStyle:"light",setControlValue:()=>{},onValuesChange:()=>{}}},37672:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(67294),s=n(45697),a=n.n(s),i=n(98601),o=n(65274),l=n(51995),c=n(68924);function p(e){const{tooltip:t}=e;if(null==t)return null;const{x:n,y:s,content:a}=t,i=(0,r.useMemo)((()=>({position:"absolute",top:s+"px",left:n+"px",padding:"8px",margin:"8px",background:"rgba(0, 0, 0, 0.8)",color:"#fff",maxWidth:"300px",fontSize:"12px",zIndex:9,pointerEvents:"none"})),[n,s]);if("string"==typeof a){const e=(0,r.useMemo)((()=>({__html:(0,c.filterXSS)(a,{stripIgnoreTag:!0})})),[a]);return r.createElement("div",{style:i},r.createElement("div",{dangerouslySetInnerHTML:e}))}return r.createElement("div",{style:i},a)}function u(){const e=(t=["\n  .deckgl-tooltip > div {\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"],n||(n=t.slice(0)),t.raw=n,t);var t,n;return u=function(){return e},e}const d={viewport:a().object.isRequired,layers:a().array.isRequired,setControlValue:a().func,mapStyle:a().string,mapboxApiAccessToken:a().string.isRequired,children:a().node,bottomMargin:a().number,width:a().number.isRequired,height:a().number.isRequired};class h extends r.Component{constructor(e){var t,n;super(e),n=e=>{this.setState({tooltip:e})},(t="setTooltip")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.tick=this.tick.bind(this),this.onViewStateChange=this.onViewStateChange.bind(this),this.state={timer:setInterval(this.tick,250),tooltip:null,viewState:e.viewport}}componentWillUnmount(){clearInterval(this.state.timer)}onViewStateChange(e){let{viewState:t}=e;this.setState({viewState:t,lastUpdate:Date.now()})}tick(){const{lastUpdate:e}=this.state;if(e&&Date.now()-e>250){const e=this.props.setControlValue;e&&e("viewport",this.state.viewState),this.setState({lastUpdate:null})}}layers(){return this.props.layers.some((e=>"function"==typeof e))?this.props.layers.map((e=>"function"==typeof e?e():e)):this.props.layers}render(){const{children:e,bottomMargin:t,height:n,width:s}=this.props,{viewState:a,tooltip:l}=this.state,c=n-t,u=this.layers();return r.createElement(r.Fragment,null,r.createElement("div",{style:{position:"relative",width:s,height:c}},r.createElement(o.Z,{initWebGLParameters:!0,controller:!0,width:s,height:c,layers:u,viewState:a,glOptions:{preserveDrawingBuffer:!0},onViewStateChange:this.onViewStateChange},r.createElement(i.Z3,{preserveDrawingBuffer:!0,mapStyle:this.props.mapStyle,mapboxApiAccessToken:this.props.mapboxApiAccessToken})),e),r.createElement(p,{tooltip:l}))}}h.propTypes=d,h.defaultProps={mapStyle:"light",setControlValue:()=>{},children:null,bottomMargin:0};const m=(0,l.iK)(h)(u())},24084:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(67294),s=n(45697),a=n.n(s);const i={label:a().string.isRequired,value:a().string.isRequired};class o extends r.PureComponent{render(){const{label:e,value:t}=this.props;return r.createElement("div",null,e,r.createElement("strong",null,t))}}o.propTypes=i},38969:(e,t,n)=>{"use strict";n.d(t,{N:()=>a,Z:()=>o});var r=n(4065),s=n(40895);function a(e,t,n,r){const a=e;let i,o,l=n;return a.js_tooltip&&(l=(0,s.Z)(a.js_tooltip)),l&&(i=e=>{e.picked?t({content:l(e),x:e.x,y:e.y}):t(null)}),a.js_onclick_href?o=e=>{const t=(0,s.Z)(a.js_onclick_href)(e);window.open(t)}:a.table_filter&&void 0!==r&&(o=e=>r(e.object[a.line_column])),{onClick:o,onHover:i,pickable:Boolean(i)}}const i={p1:.01,p5:.05,p95:.95,p99:.99};function o(e,t){if(void 0===e&&(e="sum"),void 0===t&&(t=null),"count"===e)return e=>e.length;let n;return n=e in i?(n,s)=>{let a;return a=t?n.sort(((e,n)=>r.ascending(t(e),t(n)))):n.sort(r.ascending),r.quantile(a,i[e],s)}:r[e],t?e=>n(e.map((e=>t(e)))):e=>n(e)}},27447:(e,t,n)=>{"use strict";n.r(t),n.d(t,{hexToRGB:()=>s});var r=n(16372);function s(e,t){if(void 0===t&&(t=255),!e)return[0,0,0,t];const{r:n,g:s,b:a}=(0,r.B8)(e);return[n,s,a,t]}},68555:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(17013),s=n(4065);const a=[-90,90],i=[-180,180];function o(e,t,n){let[r,s]=e,[a,i]=t;return void 0===n&&(n=.25),r<s?[r,s]:[Math.max(a,r-n),Math.min(i,s+n)]}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}function c(e,t){let{points:n,width:c,height:p,minExtent:u,maxZoom:d,offset:h,padding:m=20}=t;const{bearing:f,pitch:g}=e,b=function(e){const t=o((0,s.extent)(e,(e=>e[1])),a),n=o((0,s.extent)(e,(e=>e[0])),i);return[[n[0],t[0]],[n[1],t[1]]]}(n);try{return l({},(0,r.Xg)({bounds:b,width:c,height:p,minExtent:u,maxZoom:d,offset:h,padding:m}),{bearing:f,pitch:g})}catch(e){console.error("Could not fit viewport",e)}return e}},40895:(e,t,n)=>{"use strict";n.d(t,{Z:()=>p});var r=n(55140),s=n.n(r),a=n(77963),i=n(4065),o=n(27447);function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}const c={console,_:a.ZP,colors:o,d3array:i};function p(e,t,n){const r={},a="SAFE_EVAL_"+Math.floor(1e6*Math.random());r[a]={};const i=a+"="+e,o=l({},c,{},t);Object.keys(o).forEach((e=>{r[e]=o[e]}));try{return s().runInNewContext(i,r,n),r[a]}catch(e){return()=>e}}},90483:(e,t,n)=>{"use strict";n.d(t,{g:()=>o});var r=n(30381),s=n.n(r);const a=[1,0,1,0,0,0,0];function i(e,t){const n=parseInt(s()(t).format("x"),10);return parseInt(s()(t).add(e).format("x"),10)-n}function o(e,t){const n=s()(Math.min(...e)),r=s()(Math.max(...e));let o,l,c;if(t.includes("/")){const e=t.split("/",2);e[0].endsWith("Z")?(l=s()(e[0]),o=s().duration(e[1])):(l=s()(e[1]),o=s().duration(e[0]))}else o=s().duration(t),l=function(e,t){const n=s()(e).subtract(t),r=e.toArray(),i=n.toArray(),o=r.map(((e,t)=>i[t]!==e)).indexOf(!0),l=r.map(((e,t)=>{if(t===o){const n=e-i[t];return e-(e-a[t])%n}return t<o||-1===o?e:a[t]}));return s()(l)}(n,o);const p=n.valueOf();for(c=l.clone();c.valueOf()<p;)c.add(o);for(;c.valueOf()>p;)c.subtract(o);let u;const d=r.valueOf();for(u=l.clone();u.valueOf()>d;)u.subtract(o);for(;u.valueOf()<d;)u.add(o);const h=null!=t?[c,c.clone().add(o)]:[c,u],m=e.every((e=>null===e));return{start:parseInt(c.format("x"),10),end:parseInt(u.format("x"),10),getStep:i.bind(this,o),values:h.map((e=>parseInt(e.format("x"),10))),disabled:m}}},92540:()=>{},75307:()=>{}}]);
//# sourceMappingURL=e7e0c11727bb3ad49fdc.chunk.js.map